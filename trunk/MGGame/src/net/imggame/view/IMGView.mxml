<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas 
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:control="net.imggame.control.*"
	width="100%" height="100%" backgroundColor="#74A1B6"
	show="InitImg()" 
>
	<!--IMG Game Controller-->
	<control:ImgController id="ImgController"/>
	
	<mx:Script>
		<![CDATA[
			import net.imggame.command.ImgBuyCommand;
			import mx.controls.Alert;
			import net.imggame.model.ModelLocator;
			import net.imggame.factory.WorkflowChange;
			import net.imggame.event.*;
			import mx.collections.ArrayCollection;
			import net.imggame.event.LoadXml;
						
			[Bindable]
			public var model:ModelLocator = ModelLocator.getInstance();
			
			public function InitImg(): void {
				
				model.ImgPriceData.removeAll();
				model.ImgPriceData.addItem(ModelLocator.INIT_PRICE_DATA);
				//mx.controls.Alert.show(model.ImgPriceData.toString());
				
			}
			
			public function getBack( e:MouseEvent ): void {
				
				//model.workflowState = ModelLocator.CHOOSE_MODEL;
				WorkflowChange.goBackToChoose(e);
			
			}
			
			// Buy Action
			public function ImgBuyAction( e:MouseEvent ): void {
				var ImgBuy:ImgBuyEvent = new ImgBuyEvent();
				ImgBuy.dispatch();
			}
			// Sell Action
			public function ImgSellAction( e:MouseEvent ): void {
				var ImgSell:ImgSellEvent = new ImgSellEvent();
				ImgSell.dispatch();
			}
		
		]]>
		
	</mx:Script>
	<mx:Stroke id = "s1" color="blue" weight="2"/>
	<mx:SeriesZoom id="zoomIn" duration="1000"/>
    <mx:SeriesZoom id="zoomOut" duration="1000"/>

	<mx:Panel title="Interactive minorarity game:" width="910" height="75%" x="85.5" y="69" horizontalAlign="center" verticalAlign="middle">
		<mx:HBox >
		<mx:LineChart id="priceLineChar" height="277"  showDataTips="true" dataProvider="{model.ImgPriceData}">
			
			<mx:horizontalAxis>
				<mx:LinearAxis interval="1" minorInterval="1" />
			</mx:horizontalAxis>
			
			<mx:verticalAxis>
				<mx:LinearAxis interval="1" minorInterval="1" />
			</mx:verticalAxis>
			
			<mx:series>
				<mx:LineSeries  displayName="Price" yField=""  lineStroke="{s1}" />
			</mx:series>
		</mx:LineChart>
		
			<mx:Legend dataProvider="{priceLineChar}" id="socre"/>
			<mx:VBox height="100%" >
			           
			<mx:Form>
			
			<mx:FormHeading label="SCORE"  themeColor="#009DFF" color="#0F0B3C"/>
			
				<mx:FormItem label="SCORE:">
                <mx:Label id="Score"  text="{model.ImgScore}" width="200"/>
            </mx:FormItem>

            <mx:FormItem label="PERTURN:">
                <mx:Label id="perturn"  text="{model.ImgAvgScore}" width="200"/>
            </mx:FormItem>

            <mx:FormItem label="Level:">
                <mx:Label id="level"  text="{model.ImgLevel}" width="200"/>
             </mx:FormItem>
            <mx:FormItem label="players:">
            	<mx:Label text="{model.playerNum}" width="199" id="playerNum"/>
            </mx:FormItem>
			</mx:Form>
			
			<mx:Form >
			<mx:FormHeading label="agents /turns:{model.ImgAgentsNum}/{model.ImgTuennum}"  themeColor="#009DFF" color="#0F0B3C" textAlign="left"/>
			<mx:FormHeading label="COMPARISON:"  themeColor="#009DFF" color="#0F0B3C" textAlign="left"/>

            <mx:FormItem label="Best:">
                <mx:Label id="Best"  text="{model.ImgBest}" width="200"/>
            </mx:FormItem>

            <mx:FormItem label="Avg:">
                <mx:Label id="Avg"  text="{model.ImgAvg}" width="200"/>
            </mx:FormItem>

            <mx:FormItem label="Worst:">
                <mx:Label id="Worst"  text="{model.ImgWorst}" width="200"/>
            </mx:FormItem>
 
			</mx:Form>
		</mx:VBox>
		
	
			
		</mx:HBox>
				
		<mx:HBox>
			<mx:Button label="BUY" width="104" click="ImgBuyAction(event)"/>
			<!--mx:Button label="BUY" width="104" click="LoadXml(event)"/-->
			<mx:Button label="SELL" width="103" click="ImgSellAction(event)"/>
		</mx:HBox>	
	</mx:Panel>
	<mx:Button label="Go Back" click="getBack(event)"/>
	
	
</mx:Canvas>
